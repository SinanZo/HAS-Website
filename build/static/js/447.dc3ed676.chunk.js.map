{"version":3,"file":"static/js/447.dc3ed676.chunk.js","mappings":"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","sources":["components/Products/Products.jsx"],"sourcesContent":["// src/components/Products/Products.jsx\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport productsData from \"../../data/productsData\";\r\nimport \"./Products.css\";\r\n\r\nconst Products = () => {\r\n  const { t } = useTranslation();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  // Search/filter states\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"\");\r\n  const [selectedManufacturer, setSelectedManufacturer] = useState(\"\");\r\n  \r\n  // We do not show color/size filters in the UI anymore,\r\n  // but we still parse them from the URL if they exist (optional).\r\n  const [selectedColor, setSelectedColor] = useState(\"\");\r\n  const [selectedSize, setSelectedSize] = useState(\"\");\r\n\r\n  // Pagination\r\n  const [page, setPage] = useState(1);\r\n  const itemsPerPage = 9;\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n\r\n  // We'll store the currently selected color for each product card\r\n  // so the card image changes if the user hovers/clicks a color swatch.\r\n  // Key = productId, value = colorName or \"\" if default.\r\n  const [cardColors, setCardColors] = useState({});\r\n\r\n  // Read query parameters on mount\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    setSearchTerm(params.get(\"query\") || \"\");\r\n    setSelectedCategory(params.get(\"category\") || \"\");\r\n    setSelectedManufacturer(params.get(\"manufacturer\") || \"\");\r\n    setSelectedColor(params.get(\"color\") || \"\");\r\n    setSelectedSize(params.get(\"size\") || \"\");\r\n  }, [location.search]);\r\n\r\n  // A handleSearch that updates the URL with only searchTerm/category/manufacturer\r\n  // (since you do not want color/size in the UI filters anymore).\r\n  const handleSearch = () => {\r\n    const params = new URLSearchParams();\r\n    if (searchTerm.trim()) params.append(\"query\", searchTerm.trim());\r\n    if (selectedCategory) params.append(\"category\", selectedCategory);\r\n    if (selectedManufacturer) params.append(\"manufacturer\", selectedManufacturer);\r\n    // Omit color/size since you no longer want them in the search bar\r\n    navigate(`/products?${params.toString()}`);\r\n  };\r\n\r\n  // Filter products based on state\r\n  useEffect(() => {\r\n    let results = productsData.filter((p) => {\r\n      const matchQuery = p.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n      const matchCat = selectedCategory ? p.category === selectedCategory : true;\r\n      const matchManu = selectedManufacturer ? p.distributor === selectedManufacturer : true;\r\n      // If the URL still has color/size, we respect them, but do not show them in the UI\r\n      const matchColor = selectedColor ? (p.colors && p.colors.includes(selectedColor)) : true;\r\n      const matchSize = selectedSize ? (p.sizes && p.sizes.includes(selectedSize)) : true;\r\n\r\n      return matchQuery && matchCat && matchManu && matchColor && matchSize;\r\n    });\r\n    setFilteredProducts(results);\r\n    setPage(1);\r\n  }, [searchTerm, selectedCategory, selectedManufacturer, selectedColor, selectedSize]);\r\n\r\n  // Infinite scroll\r\n  const loadMoreRef = useRef(null);\r\n  useEffect(() => {\r\n    const currentRef = loadMoreRef.current; // store it in a variable to avoid ESLint warning\r\n    if (!currentRef) return;\r\n\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting && page * itemsPerPage < filteredProducts.length) {\r\n          setPage((prev) => prev + 1);\r\n        }\r\n      },\r\n      { rootMargin: \"200px\" }\r\n    );\r\n\r\n    observer.observe(currentRef);\r\n\r\n    return () => {\r\n      observer.unobserve(currentRef);\r\n    };\r\n  }, [filteredProducts, page, itemsPerPage]);\r\n\r\n  const paginatedProducts = filteredProducts.slice(0, page * itemsPerPage);\r\n\r\n  const clearFilters = () => {\r\n    setSearchTerm(\"\");\r\n    setSelectedCategory(\"\");\r\n    setSelectedManufacturer(\"\");\r\n    setSelectedColor(\"\");\r\n    setSelectedSize(\"\");\r\n    navigate(\"/products\");\r\n  };\r\n\r\n  // Modal states\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n  const [galleryIndex, setGalleryIndex] = useState(0);\r\n  const [zoomed, setZoomed] = useState(false);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const [imagePos, setImagePos] = useState({ x: 0, y: 0 });\r\n  const [touchStartX, setTouchStartX] = useState(null);\r\n\r\n  const openProductDetail = (product) => {\r\n    setSelectedProduct(product);\r\n    setGalleryIndex(0);\r\n    setZoomed(false);\r\n    setImagePos({ x: 0, y: 0 });\r\n  };\r\n  const closeModal = () => {\r\n    setSelectedProduct(null);\r\n    setGalleryIndex(0);\r\n    setZoomed(false);\r\n    setImagePos({ x: 0, y: 0 });\r\n  };\r\n\r\n  // Build gallery for the modal\r\n  const getGallery = () => {\r\n    if (!selectedProduct) return [];\r\n    return selectedProduct.gallery && selectedProduct.gallery.length > 0\r\n      ? selectedProduct.gallery\r\n      : [selectedProduct.image];\r\n  };\r\n  const gallery = getGallery();\r\n\r\n  const handleNextImage = () => {\r\n    setGalleryIndex((prev) => (prev + 1) % gallery.length);\r\n    setImagePos({ x: 0, y: 0 });\r\n  };\r\n  const handlePrevImage = () => {\r\n    setGalleryIndex((prev) => (prev === 0 ? gallery.length - 1 : prev - 1));\r\n    setImagePos({ x: 0, y: 0 });\r\n  };\r\n  const handleToggleZoom = () => {\r\n    setZoomed((prev) => !prev);\r\n    if (zoomed) setImagePos({ x: 0, y: 0 });\r\n  };\r\n\r\n  // Mouse panning\r\n  const handleMouseDown = (e) => {\r\n    if (!zoomed) return;\r\n    setIsDragging(true);\r\n    setDragStart({ x: e.clientX - imagePos.x, y: e.clientY - imagePos.y });\r\n  };\r\n  const handleMouseMove = (e) => {\r\n    if (!zoomed || !isDragging) return;\r\n    const newX = e.clientX - dragStart.x;\r\n    const newY = e.clientY - dragStart.y;\r\n    setImagePos({ x: newX, y: newY });\r\n  };\r\n  const handleMouseUpOrLeave = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  // Touch swiping\r\n  const handleTouchStart = (e) => {\r\n    if (zoomed) return;\r\n    setTouchStartX(e.touches[0].clientX);\r\n  };\r\n  const handleTouchEnd = (e) => {\r\n    if (zoomed || touchStartX === null) return;\r\n    const touchEndX = e.changedTouches[0].clientX;\r\n    const deltaX = touchEndX - touchStartX;\r\n    const swipeThreshold = 50;\r\n    if (deltaX > swipeThreshold) {\r\n      handlePrevImage();\r\n    } else if (deltaX < -swipeThreshold) {\r\n      handleNextImage();\r\n    }\r\n    setTouchStartX(null);\r\n  };\r\n\r\n  // Helper to get the \"current image\" for the card, based on cardColors[product.id]\r\n  const getCardImage = (product) => {\r\n    const currentColor = cardColors[product.id] || \"\";\r\n    if (currentColor && product.colorVariants && product.colorVariants.length > 0) {\r\n      const variant = product.colorVariants.find((v) => v.name === currentColor);\r\n      if (variant && variant.gallery && variant.gallery.length > 0) {\r\n        return variant.gallery[0]; // first image for that color variant\r\n      }\r\n    }\r\n    // fallback to product.image\r\n    return product.image;\r\n  };\r\n\r\n  const handleCardColorClick = (e, product, color) => {\r\n    e.stopPropagation(); // so we don't open the modal\r\n    setCardColors((prev) => ({ ...prev, [product.id]: color }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"productsContainer\">\r\n      <h1 className=\"sectionTitle\">{t(\"products.title\", \"Explore Our Products\")}</h1>\r\n      <p className=\"sectionSubtitle\">\r\n        {t(\"products.description\", \"Browse through our wide range of high-quality safety and industrial products.\")}\r\n      </p>\r\n\r\n      {/* Filter Bar */}\r\n      <div className=\"filterBar\">\r\n        <div className=\"filterGroup\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder={t(\"products.searchPlaceholder\", \"Search Products...\")}\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            // The error was \"handleSearch is not defined\": we now define it above.\r\n            // So we can safely call handleSearch here:\r\n            onKeyDown={(e) => e.key === \"Enter\" && handleSearch()}\r\n            className=\"searchInput\"\r\n          />\r\n          <select\r\n            value={selectedCategory}\r\n            onChange={(e) => setSelectedCategory(e.target.value)}\r\n            className=\"filterSelect\"\r\n          >\r\n            <option value=\"\">{t(\"products.allCategories\", \"All Categories\")}</option>\r\n            {Array.from(new Set(productsData.map((p) => p.category))).map((cat, idx) => (\r\n              <option key={idx} value={cat}>\r\n                {cat}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <select\r\n            value={selectedManufacturer}\r\n            onChange={(e) => setSelectedManufacturer(e.target.value)}\r\n            className=\"filterSelect\"\r\n          >\r\n            <option value=\"\">{t(\"products.allManufacturers\", \"All Manufacturers\")}</option>\r\n            {Array.from(new Set(productsData.map((p) => p.distributor))).map((manu, idx) => (\r\n              <option key={idx} value={manu}>\r\n                {manu}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          <button onClick={clearFilters} className=\"clearButton\">\r\n            {t(\"products.clearFilters\", \"Clear Filters\")}\r\n          </button>\r\n        </div>\r\n        <div className=\"resultsCount\">\r\n          {filteredProducts.length} {t(\"products.found\", \"products found\")}\r\n        </div>\r\n        {/* \"Search\" button calls handleSearch */}\r\n        <button onClick={handleSearch} className=\"searchButton\">\r\n          {t(\"products.searchButton\", \"Search\")}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Products Grid */}\r\n      <div className=\"productGrid\">\r\n        {paginatedProducts.length > 0 ? (\r\n          paginatedProducts.map((product) => {\r\n            const displayImage = getCardImage(product);\r\n\r\n            return (\r\n              <div\r\n                key={product.id}\r\n                className=\"productCard\"\r\n                onClick={() => openProductDetail(product)}\r\n              >\r\n                <div className=\"imageWrapper\">\r\n                  <img src={displayImage} alt={product.name} className=\"productImage\" />\r\n                </div>\r\n                <div className=\"productInfo\">\r\n                  <h3 className=\"productName\">{product.name}</h3>\r\n                  {product.brief && <p className=\"productBrief\">{product.brief}</p>}\r\n\r\n                  {/* Show color swatches if product has multiple colors */}\r\n                  {product.colors && product.colors.length > 0 && (\r\n                    <div className=\"colorSwatchesPreview\">\r\n                      {product.colors.map((col, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className={`colorCirclePreview ${\r\n                            (cardColors[product.id] || \"\") === col ? \"selected\" : \"\"\r\n                          }`}\r\n                          style={{ backgroundColor: col.toLowerCase() }}\r\n                          onClick={(e) => handleCardColorClick(e, product, col)}\r\n                          title={col}\r\n                        />\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n\r\n                  <button\r\n                    className=\"orderButton\"\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      window.open(\r\n                        `https://wa.me/962795428029?text=I'm%20interested%20in%20${encodeURIComponent(product.name)}`,\r\n                        \"_blank\"\r\n                      );\r\n                    }}\r\n                  >\r\n                    {t(\"products.orderNow\", \"Order Now\")}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <p className=\"noProductsMessage\">{t(\"products.noProductsFound\", \"No products found\")}</p>\r\n        )}\r\n      </div>\r\n      <div ref={loadMoreRef} style={{ height: \"1px\" }} />\r\n\r\n      {/* Modal Detail View */}\r\n      {selectedProduct && (\r\n        <div className=\"modalOverlay\" onClick={closeModal}>\r\n          <div className=\"modalContent\" onClick={(e) => e.stopPropagation()}>\r\n            <button className=\"closeModalButton\" onClick={closeModal}>\r\n              &times;\r\n            </button>\r\n            <div className=\"galleryWrapperModal\">\r\n              <div\r\n                className=\"galleryImageContainer\"\r\n                onTouchStart={handleTouchStart}\r\n                onTouchEnd={handleTouchEnd}\r\n                onMouseDown={handleMouseDown}\r\n                onMouseMove={handleMouseMove}\r\n                onMouseUp={handleMouseUpOrLeave}\r\n                onMouseLeave={handleMouseUpOrLeave}\r\n              >\r\n                <img\r\n                  src={gallery[galleryIndex]}\r\n                  alt={selectedProduct.name}\r\n                  className={`detailImage ${zoomed ? \"zoomed\" : \"\"}`}\r\n                  style={{\r\n                    transform: zoomed\r\n                      ? `scale(1.5) translate(${imagePos.x}px, ${imagePos.y}px)`\r\n                      : \"scale(1) translate(0, 0)\",\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"galleryNav\">\r\n                <button onClick={handleToggleZoom} className=\"galleryButton\">\r\n                  {zoomed ? \"Zoom Out\" : \"Zoom In\"}\r\n                </button>\r\n                {gallery.length > 1 && (\r\n                  <>\r\n                    <button onClick={handlePrevImage} className=\"galleryButton\">\r\n                      ‹\r\n                    </button>\r\n                    <span className=\"galleryCount\">\r\n                      {galleryIndex + 1} / {gallery.length}\r\n                    </span>\r\n                    <button onClick={handleNextImage} className=\"galleryButton\">\r\n                      ›\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"detailInfo\">\r\n              <h2 className=\"detailTitleModal\">{selectedProduct.name}</h2>\r\n              {selectedProduct.brief && (\r\n                <p className=\"detailBrief\">{selectedProduct.brief}</p>\r\n              )}\r\n              {selectedProduct.description && (\r\n                <p className=\"detailDescription\">{selectedProduct.description}</p>\r\n              )}\r\n              {selectedProduct.sizes && selectedProduct.sizes.length > 0 && (\r\n                <p className=\"detailSizes\">\r\n                  <strong>Available Sizes:</strong>{\" \"}\r\n                  {selectedProduct.sizes.join(\", \")}\r\n                </p>\r\n              )}\r\n              {selectedProduct.colors && selectedProduct.colors.length > 0 && (\r\n                <div className=\"detailColors\">\r\n                  <strong>Colors:</strong>\r\n                  <div className=\"colorSwatches\">\r\n                    {/* For the modal, we can optionally let user pick color here too,\r\n                        or just show them. This is optional. */}\r\n                    {selectedProduct.colors.map((col) => (\r\n                      <div\r\n                        key={col}\r\n                        className=\"colorSwatch\"\r\n                        style={{ backgroundColor: col.toLowerCase() }}\r\n                        title={col}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {selectedProduct.additionalInfo &&\r\n                Object.keys(selectedProduct.additionalInfo).length > 0 && (\r\n                  <div className=\"detailAdditionalInfo\">\r\n                    <h3>Additional Information</h3>\r\n                    <table>\r\n                      <tbody>\r\n                        {Object.entries(selectedProduct.additionalInfo).map(([key, value]) => (\r\n                          <tr key={key}>\r\n                            <th>{key}</th>\r\n                            <td>{value}</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                )}\r\n              <button\r\n                className=\"orderButton\"\r\n                onClick={() =>\r\n                  window.open(\r\n                    `https://wa.me/962795428029?text=I'm%20interested%20in%20${encodeURIComponent(\r\n                      selectedProduct.name\r\n                    )}`,\r\n                    \"_blank\"\r\n                  )\r\n                }\r\n              >\r\n                {t(\"products.orderNow\", \"Order Now\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"],"names":["Products","t","useTranslation","location","useLocation","navigate","useNavigate","searchTerm","setSearchTerm","useState","selectedCategory","setSelectedCategory","selectedManufacturer","setSelectedManufacturer","selectedColor","setSelectedColor","selectedSize","setSelectedSize","page","setPage","filteredProducts","setFilteredProducts","cardColors","setCardColors","useEffect","params","URLSearchParams","search","get","handleSearch","trim","append","concat","toString","results","productsData","filter","p","matchQuery","name","toLowerCase","includes","matchCat","category","matchManu","distributor","matchColor","colors","matchSize","sizes","loadMoreRef","useRef","currentRef","current","observer","IntersectionObserver","entries","isIntersecting","length","prev","rootMargin","observe","unobserve","paginatedProducts","slice","selectedProduct","setSelectedProduct","galleryIndex","setGalleryIndex","zoomed","setZoomed","isDragging","setIsDragging","dragStart","setDragStart","x","y","imagePos","setImagePos","touchStartX","setTouchStartX","closeModal","gallery","image","handleNextImage","handlePrevImage","handleMouseUpOrLeave","_jsxs","className","children","_jsx","type","placeholder","value","onChange","e","target","onKeyDown","key","Array","from","Set","map","cat","idx","manu","onClick","clearFilters","product","displayImage","currentColor","id","colorVariants","variant","find","v","getCardImage","openProductDetail","src","alt","brief","col","style","backgroundColor","handleCardColorClick","color","stopPropagation","_objectSpread","title","window","open","encodeURIComponent","ref","height","onTouchStart","touches","clientX","onTouchEnd","deltaX","changedTouches","onMouseDown","clientY","onMouseMove","newX","newY","onMouseUp","onMouseLeave","transform","handleToggleZoom","_Fragment","description","join","additionalInfo","Object","keys","_ref"],"sourceRoot":""}